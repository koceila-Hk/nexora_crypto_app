<!-- HEADER -->
<app-header></app-header>

<section class="hero-section py-4">
  <div class="container">
    <div class="row align-items-center stroke-row">
      <!-- Solde de compte-->
      <div class="col-md-5">
        <div class="p-4">
          <h1>Commencez à explorer et testez vos stratégies !</h1>
          <p>Votre solde :</p>
          <p class="fs-4 fw-semibold text-white mb-3">
            {{balance !== null ? (balance + ' Points') : 'Chargement...' }}
          </p>
          <a routerLink="/markets" class="btn btn-primary" role="button">Commencer</a>
        </div>
      </div>

      <!-- Bloc droit les cryptos possédez -->
      <div class="col-md-7">
        <div class="card-body">
          <h2>Voici les cryptos que vous possédez</h2>

          <div *ngFor="let wallet of wallets" class="d-flex justify-content-between align-items-center mt-3 border-bottom pb-2">
            <div class="d-flex align-items-center">
              <img [src]="coin.icon" alt="{{ coin.cryptoName }}" width="30" height="30" class="me-2" />
              <span>{{ wallet.cryptoName }}</span>
            </div>
            <span>{{ wallet.quantity | number:'1.2-4'}}</span>
            <span *ngIf="wallet.variationPercentage >= 0 ? 'text-success' : 'text-danger'">
              {{ wallet.variationPercentage >= 0 ? '+' : '' }}{{ wallet.variationPercentage | number:'1.2-2' }}%
            </span>
          </div>

        </div>

      </div>
    </div> 

    <!-- Historique des transactions -->
    <div class="row justify-content-center mt-4">
      <div class="col-12">
        <div class="text-center text-white my-4">
          <h2>Historique des Transactions</h2>
        </div>

        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-borderless align-middle mb-0">
              <thead class="text-secondary">
                <tr>
                  <th>Date</th>
                  <th>Type</th>
                  <th>Crypto</th>
                  <th>Quantité</th>
                  <th>Prix unitaire</th>
                  <th>Total payé</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let transaction of transactions">
                  <td>{{ transaction.dateTransaction | date:'dd-MM-yyyy' }}</td>
                  <td>{{ transaction.type | transactionType}}</td>
                  <td>{{ transaction.cryptoName }}</td>
                  <td>{{ transaction.quantity | number:'1.2-4'}}</td>
                  <td>{{ transaction.unitPrice | number:'1.2-3' }} €</td>
                  <td>{{ transaction.totalAmount | number:'1.2-3' }} €</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div> 
  </div> 
</section>

<!-- Footer -->
<app-footer></app-footer>
